<div class="h-svh grid grid-cols-2">
    <!-- Left grid -->
    <div class="bg-n-1">
        <div class="relative overflow-hidden w-full h-full cursor-pointer text-2xl font-bold bg-n-1">
            <div 
                class="z-10 absolute w-full h-full peer"
            ></div>
            <div 
                class="absolute peer-hover:-top-20 peer-hover:-left-16 peer-hover:w-[150%] peer-hover:h-[150%] -top-44 -left-28 w-32 h-44 rounded-full bg-n-2 transition-all duration-500"
            ></div>
            <div
                class="absolute flex text-2xl text-center items-end justify-end peer-hover:right-0 peer-hover:rounded-b-none peer-hover:bottom-0 peer-hover:items-center peer-hover:justify-center peer-hover:w-full peer-hover:h-full -bottom-44 -right-28 w-36 h-44 rounded-full bg-n-2 transition-all duration-500"
            >Let's get started</div>
            <div class="w-full h-full text-white items-center justify-center flex"
            >Ready to perfect your interview skills further?</div>
        </div>
    </div>

    <!-- Right grid -->
    <div class="flex flex-col ms-16 me-40 my-20 gap-3 px-10">
        <!-- Logo -->
        <div class="w-full grid justify-items-end">
            <div class="flex flex-row items-center gap-x-1">
                <img [src]="interviewquest_logo" alt="interviewquest_logo" [width]="40" class="p-1"/>
                <span class="text-xl font-semibold">InterviewQuest</span>
            </div>
        </div>
        
        <!-- Sign in Form -->
        <form [formGroup]="signInForm" (ngSubmit)="processEmailPasswordSignIn()" class="pt-20">
            <p class="h3">Welcome Back!</p>
            <div class="mt-6">
                <!-- Email -->
                <div class="mt-6 relative">
                    <label
                        class="form-label"
                        for="email">Email
                    </label>
                    <input
                        placeholder="myemail@example.com"
                        class="form-input"
                        formControlName="email"
                        type="email"
                        autocomplete="email"/>
                    <div class="mt-3" *ngIf="signInForm.get('email')?.touched && signInForm.get('email')?.invalid">
                        <p 
                            class="text-xs text-n-2"
                            *ngIf="signInForm.get('email')?.hasError('required')">
                            This field is required!
                        </p>
                    </div>
                </div>
                <!-- Password -->
                <div class="mt-6">
                    <label
                        class="form-label"
                        for="password">Password
                    </label>
                    <div class="relative">
                        <input
                            placeholder="••••••••"
                            class="form-input"
                            formControlName="password"
                            [type]="passwordVisible ? 'text' : 'password'"
                            autocomplete="current-password"/>
                        <div class="absolute bottom-3 right-5" (click)="togglePasswordVisibility()">
                            <div *ngIf="passwordVisible">
                                <svg class="w-6 h-6 text-n-2 dark:text-white" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24">
                                    <path stroke="currentColor" stroke-width="1" d="M21 12c0 1.2-4.03 6-9 6s-9-4.8-9-6c0-1.2 4.03-6 9-6s9 4.8 9 6Z"/>
                                    <path stroke="currentColor" stroke-width="2" d="M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"/>
                                </svg>  
                            </div>
                            <div *ngIf="!passwordVisible">
                                <svg class="w-6 h-6 text-n-2 dark:text-white" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24">
                                    <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1" d="M3.933 13.909A4.357 4.357 0 0 1 3 12c0-1 4-6 9-6m7.6 3.8A5.068 5.068 0 0 1 21 12c0 1-3 6-9 6-.314 0-.62-.014-.918-.04M5 19 19 5m-4 7a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"/>
                                </svg> 
                            </div>  
                        </div>   
                    </div>
                    <div class="mt-3" *ngIf="signInForm.get('password')?.touched && signInForm.get('password')?.invalid">
                        <p 
                            class="text-xs text-n-2"
                            *ngIf="signInForm.get('email')?.hasError('required')">
                            This field is required!
                        </p>
                        <p 
                            class="text-xs text-n-2"
                            *ngIf="signInForm.get('email')?.hasError('passwordValidator')">
                            Must contain at least 1 number, and at least 8 or more characters
                        </p>
                    </div>
                    <!-- Link to model when user forgets password -->
                    <div class="mt-3">
                        <a 
                            class="text-sm text-n-2 hover:underline hover:underline-offset-4 cursor-pointer" 
                            (click)="openForgetPasswordModal()"
                            data-modal-target="forgetPasswordModal" data-modal-toggle="forgetPasswordModal" 
                            >Forget password?
                        </a>
                    </div>
                </div>
                
                <!-- Sign in by email/password -->
                <button
                    class="orange-button-01 mt-10 w-full"
                    type="submit"
                    [disabled]="signInForm.invalid">Sign in
                </button>
            </div>
        </form>

        <!-- Divider -->
        <div class="flex items-center my-4">
            <hr class="flex-grow border-t border-stroke-1">
            <span class="mx-2 text-n-2 text-sm">or</span>
            <hr class="flex-grow border-t border-stroke-1">
        </div>

        <!-- Sign in using Google -->
        <button 
            class="orange-outline-button-01 w-full flex items-center gap-x-2"
            type="button"
            (click) = "processGoogleSignIn()">
            <svg class="w-6 h-6 text-n-2 dark:text-white" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24">
                <path fill-rule="evenodd" d="M12.037 21.998a10.313 10.313 0 0 1-7.168-3.049 9.888 9.888 0 0 1-2.868-7.118 9.947 9.947 0 0 1 3.064-6.949A10.37 10.37 0 0 1 12.212 2h.176a9.935 9.935 0 0 1 6.614 2.564L16.457 6.88a6.187 6.187 0 0 0-4.131-1.566 6.9 6.9 0 0 0-4.794 1.913 6.618 6.618 0 0 0-2.045 4.657 6.608 6.608 0 0 0 1.882 4.723 6.891 6.891 0 0 0 4.725 2.07h.143c1.41.072 2.8-.354 3.917-1.2a5.77 5.77 0 0 0 2.172-3.41l.043-.117H12.22v-3.41h9.678c.075.617.109 1.238.1 1.859-.099 5.741-4.017 9.6-9.746 9.6l-.215-.002Z" clip-rule="evenodd"/>
            </svg>
            Continue with Google
        </button>

        <div class="text-sm text-n-2 dark:text-n-2 text-start pt-8">
            Don't have an account?
            <a 
                class="font-semibold hover:underline hover:underline-offset-4" 
                [routerLink]="['/signup']">
                Sign up
            </a>
        </div>

        <!-- Main modal when user forgets password -->
        <div 
            id="forgetPasswordModal" 
            class="hidden overflow-y-auto overflow-x-hidden fixed top-0 right-0 left-0 z-50 justify-center items-center w-full md:inset-0 h-[calc(100%-1rem)] max-h-full">
            <div class="relative p-4 w-full max-w-2xl max-h-full">
                <!-- Modal content -->
                <div class="relative flex flex-col gap-8 bg-n-3 rounded-lg shadow dark:bg-n-1 p-8 ">
                    <!-- Modal header -->
                    <div class="rounded-t">
                        <!-- Model title -->
                        <h3 class="text-2xl font-semibold text-n-1 dark:text-n-3">
                            Reset Your Password
                        </h3>
                    </div>
                    <!-- Modal body -->
                    <form 
                        class="flex flex-col gap-y-6"
                        [formGroup]="resetPasswordForm"
                        (ngSubmit)="onResetPassword()">
                        <div class="flex flex-col gap-8">
                            <input 
                                placeholder="your-registered-account@email.com"
                                id="email" 
                                formControlName="email" 
                                type="email" 
                                class="form-input"/>
                            <div *ngIf="errorMessage" class="text-n-2 mt-2">
                                {{ errorMessage }}
                            </div>
                        </div>
                        <div class="flex justify-between">
                            <button 
                                type="submit" 
                                [disabled]="!resetPasswordForm.valid" 
                                class="orange-button-01">
                                Send Password Reset Email
                            </button>
                            <button 
                                type="button" 
                                data-modal-hide="forgetPasswordModal"
                                class="orange-outline-button-01">
                                Cancel
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>
<div *ngIf="signInFailed" class="error-message">
    {{ errorMessage }}
</div>